"use strict";(self.webpackChunksnipcode=self.webpackChunksnipcode||[]).push([[154],{9154:(J,u,s)=>{s.r(u),s.d(u,{TrendingModule:()=>M});var d=s(9808),g=s(5425),h=s(2648),m=s(727),f=s(9300),v=s(4004),n=s(7587),T=s(1823),y=s(593);function C(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"app-snippets-list",7),n.NdJ("likeChange",function(o){n.CHM(t);const l=n.oxw(2).ngIf;return n.oxw().onLikeChange(o,l)}),n.qZA()}if(2&e){const t=n.oxw(2).ngIf;n.Q6J("snippets",t)("readOnlySnippets",!0)("showAuthor",!0)("classes","col-xl-3 col-lg-5 col-md-5 col-sm-12 col-xs-12 col-12")}}function x(e,i){if(1&e&&(n.TgZ(0,"div",4)(1,"h2",5),n._uU(2,"Trending snippets"),n.qZA(),n.YNc(3,C,1,4,"app-snippets-list",6),n.qZA()),2&e){const t=n.oxw().ngIf;n.xp6(3),n.Q6J("ngIf",null==t?null:t.length)}}function _(e,i){if(1&e&&(n.TgZ(0,"div",2),n.YNc(1,x,4,1,"div",3),n.qZA()),2&e){const t=i.ngIf;n.oxw();const r=n.MAs(3);n.xp6(1),n.Q6J("ngIf",t.length)("ngIfElse",r)}}function I(e,i){1&e&&(n.TgZ(0,"div",8)(1,"h2",4),n._uU(2,"Oops. There are no trending snippets"),n.qZA()())}const B=[{path:"",component:(()=>{class e{constructor(t,r,o){this._snippetsService=t,this._userService=r,this._cdr=o,this._subscriptions=new m.w0,this.snippets$=this._snippetsService.allSnippets$.pipe((0,f.h)(Boolean),(0,v.U)(l=>[...l].sort((p,a)=>a.likedBy.length-p.likedBy.length)))}ngOnInit(){this._subscriptions.add(this._userService.user$.subscribe(t=>{this._user=t}))}ngOnDestroy(){this._subscriptions.unsubscribe()}onLikeChange(t,r){const o=r.find(c=>c.id===t);if(!o||!this._user||(null==o?void 0:o.createdBy.id)===this._user.id)return;let p=[];p=o.likedBy.some(({id:c})=>c===this._user.id)?o.likedBy.filter(({id:c})=>c!==this._user.id):[...o.likedBy,{id:this._user.id,name:this._user.name,surname:this._user.surname}];const Z=this._snippetsService.update({id:t,likedBy:p,userId:this._user.id}).subscribe({next:()=>{this._cdr.detectChanges(),Z.unsubscribe()}})}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(h._X),n.Y36(T.KD),n.Y36(n.sBO))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-trending"]],decls:4,vars:3,consts:[["class","app-content-container trending",4,"ngIf"],["emptyList",""],[1,"app-content-container","trending"],["class","container",4,"ngIf","ngIfElse"],[1,"container"],[1,"trending__header"],[3,"snippets","readOnlySnippets","showAuthor","classes","likeChange",4,"ngIf"],[3,"snippets","readOnlySnippets","showAuthor","classes","likeChange"],[1,"empty-list"]],template:function(t,r){1&t&&(n.YNc(0,_,2,2,"div",0),n.ALo(1,"async"),n.YNc(2,I,3,0,"ng-template",null,1,n.W1O)),2&t&&n.Q6J("ngIf",n.lcZ(1,1,r.snippets$))},directives:[d.O5,y.S],pipes:[d.Ov],styles:[".trending__header[_ngcontent-%COMP%]{text-align:center;font-size:1.6rem}.empty-list[_ngcontent-%COMP%]{height:200px;display:flex;justify-content:center;align-items:center;text-align:center;font-size:1.4rem}"],changeDetection:0}),e})(),resolve:{snippets:h.zo}}];let S=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[[g.Bz.forChild(B)],g.Bz]}),e})();var A=s(1414),O=s(4466);let M=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[[d.ez,S,A.IJ,O.m]]}),e})()}}]);