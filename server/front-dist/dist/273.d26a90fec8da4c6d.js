"use strict";(self.webpackChunksnipcode=self.webpackChunksnipcode||[]).push([[273],{8273:(tt,x,l)=>{l.r(x),l.d(x,{ProfileModule:()=>W});var u=l(9808),d=l(5425),h=l(2648),t=l(7587),v=l(1823),p=l(1414),T=l(4783),Z=l(7358);function F(n,i){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&n){const e=t.oxw().ngIf;t.Udp("text-align","left"),t.xp6(1),t.Oqu(e.summary)}}function P(n,i){1&n&&(t.TgZ(0,"ngb-accordion",1,2)(2,"ngb-panel",3),t.YNc(3,F,2,3,"ng-template",4),t.qZA()())}let w=(()=>{class n{constructor(e){this._userService=e,this.user$=this._userService.user$}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Z.K))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-profile-summary"]],decls:2,vars:3,consts:[["class","profile-summary","type","'primary'",4,"ngIf"],["type","'primary'",1,"profile-summary"],["acc","ngbAccordion"],["title","Profile summary"],["ngbPanelContent",""]],template:function(e,o){1&e&&(t.YNc(0,P,4,0,"ngb-accordion",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,o.user$))},directives:[u.O5,p.gY,p.Gk,p.gW],pipes:[u.Ov],styles:[""],changeDetection:0}),n})();var M=l(593);function A(n,i){if(1&n&&(t.TgZ(0,"h4",14),t._uU(1),t.qZA()),2&n){const e=t.oxw().ngIf;t.xp6(1),t.hij(" ",e.position," ")}}function O(n,i){if(1&n&&t._UZ(0,"app-snippets-list",18),2&n){const e=t.oxw(2).ngIf;t.Q6J("snippets",e)("readOnlySnippets",!1)("showAuthor",!1)("canDelete",!0)("classes","col-xl-3 col-lg-5 col-md-5 col-sm-12 col-xs-12 col-12")}}function I(n,i){if(1&n&&(t.ynx(0),t.YNc(1,O,1,5,"app-snippets-list",17),t.BQk()),2&n){const e=t.oxw().ngIf;t.xp6(1),t.Q6J("ngIf",null==e?null:e.length)}}function D(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",15)(2,"h3"),t._uU(3,"Your snippets"),t.qZA(),t.TgZ(4,"button",11),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).onCreate()}),t._uU(5," Create a new one "),t.qZA()(),t.YNc(6,I,2,1,"ng-container",16),t.BQk()}if(2&n){const e=i.ngIf;t.oxw(2);const o=t.MAs(3);t.xp6(4),t.Udp("font-weight","bold"),t.Q6J("hover-classes","hover-btn-styles"),t.xp6(2),t.Q6J("ngIf",e.length)("ngIfElse",o)}}function U(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5),t._UZ(4,"img",6),t.TgZ(5,"div",7)(6,"h2",8),t._uU(7),t.qZA(),t.YNc(8,A,2,1,"h4",9),t.qZA(),t.TgZ(9,"div",10)(10,"button",11),t.NdJ("click",function(){return t.CHM(e),t.oxw().onSettingsClick()}),t._uU(11," Settings "),t.qZA()()(),t.TgZ(12,"div",12),t._UZ(13,"app-profile-summary"),t.qZA(),t.YNc(14,D,7,5,"ng-container",13),t.ALo(15,"async"),t.qZA()()()}if(2&n){const e=i.ngIf,o=t.oxw();t.xp6(7),t.AsE(" ",e.name," ",e.surname," "),t.xp6(1),t.Q6J("ngIf",e.position),t.xp6(2),t.Q6J("hover-classes","hover-btn-styles"),t.xp6(4),t.Q6J("ngIf",t.lcZ(15,5,o.snippets$))}}function Y(n,i){1&n&&(t.TgZ(0,"div",19)(1,"h2",20),t._uU(2,"There are no snippets"),t.qZA()())}let z=(()=>{class n{constructor(e,o,r,s,a){this._userService=e,this._snippetsService=o,this._modalService=r,this._router=s,this._route=a,this.user$=this._userService.user$,this.snippets$=this._snippetsService.userSnippets$}onCreate(){try{this._modalService.open(h.aw,{ariaLabelledBy:"create-snippet-modal",animation:!0,backdrop:"static",centered:!0,fullscreen:!0,keyboard:!1,size:"lg"})}catch(e){}}onSettingsClick(){this._router.navigate(["../settings"],{relativeTo:this._route})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(v.KD),t.Y36(h._X),t.Y36(p.FF),t.Y36(d.F0),t.Y36(d.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-profile-card"]],decls:4,vars:3,consts:[["class","profile-card py-3",4,"ngIf"],["emptyList",""],[1,"profile-card","py-3"],[1,"profile-card__content"],[1,"profile-card__info"],[1,"d-flex","profile-card__image-container","flex-column","align-items-center"],["src","https://picsum.photos/id/100/1500/500",1,"profile-card__image"],[1,"profile-card__title","my-3"],[1,"profile-card__fullname"],["class","profile-card__position",4,"ngIf"],[1,"profile-card__settings","mb-3"],["type","button",1,"btn","btn-light",3,"hover-classes","click"],[1,"profile-card__summary"],[4,"ngIf"],[1,"profile-card__position"],[1,"my-3","d-flex","justify-content-between"],[4,"ngIf","ngIfElse"],[3,"snippets","readOnlySnippets","showAuthor","canDelete","classes",4,"ngIf"],[3,"snippets","readOnlySnippets","showAuthor","canDelete","classes"],[1,"empty-list"],[1,"container"]],template:function(e,o){1&e&&(t.YNc(0,U,16,7,"div",0),t.ALo(1,"async"),t.YNc(2,Y,3,0,"ng-template",null,1,t.W1O)),2&e&&t.Q6J("ngIf",t.lcZ(1,1,o.user$))},directives:[u.O5,T.B,w,M.S],pipes:[u.Ov],styles:[".profile-card[_ngcontent-%COMP%]{display:flex;justify-content:center}.profile-card__image-container[_ngcontent-%COMP%]{width:200px;margin:0 auto}.profile-card__content[_ngcontent-%COMP%]{width:100%}.profile-card__title[_ngcontent-%COMP%]{text-align:center}.profile-card__image[_ngcontent-%COMP%]{width:200px;height:200px;border-radius:50%}.empty-list[_ngcontent-%COMP%]{height:200px;display:flex;justify-content:center;align-items:center;text-align:center;font-size:1.4rem}"],changeDetection:0}),n})(),J=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-profile"]],decls:3,vars:0,consts:[[1,"app-content-container","profile"],[1,"container"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"router-outlet"),t.qZA()())},directives:[d.lC],styles:[""],changeDetection:0}),n})();var c=l(3075),y=l(5670),f=(()=>{return(n=f||(f={}))["Roboto Mono"]="Roboto Mono",n.Monaco="Monaco",n.Consolas="Consolas",f;var n})(),k=l(727),G=l(9300),N=l(5698),Q=l(2749),j=l(1155);function $(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",13),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().onThemeSelect(s)}),t._uU(1),t.qZA()}if(2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",e," ")}}function E(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",13),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().onFontFamilySelect(s)}),t._uU(1),t.qZA()}if(2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",e," ")}}function q(n,i){1&n&&(t.TgZ(0,"h5",14),t._UZ(1,"i",15),t._uU(2," Changes has been made. "),t.qZA())}const B=function(){return["editor","theme"]},R=function(){return["editor","fontFamily"]},L=[{path:"",component:J,resolve:{snippets:h.il},children:[{path:"profile-card",component:z},{path:"settings",component:(()=>{class n{constructor(e,o,r,s,a,m){this._userSettingsService=e,this._userService=o,this._fb=r,this._cdr=s,this._editorSettingsService=a,this._toastService=m,this._subscriptions=new k.w0,this._userSettings=null}get isDisabled(){return!this.hasDiff||!this.formGroup.valid}get maxFontSize(){return 24}get minFontSize(){return 8}get hasDiff(){var e,o,r,s;if(!this._userSettings)return!1;const{theme:a=y.k.Dark,fontSize:m=14,fontFamily:g="Roboto Mono"}=null===(e=this._userSettings)||void 0===e?void 0:e.aceEditor,S=null===(o=this.formGroup.get(["editor","theme"]))||void 0===o?void 0:o.value,b=null===(r=this.formGroup.get(["editor","fontSize"]))||void 0===r?void 0:r.value,C=null===(s=this.formGroup.get(["editor","fontFamily"]))||void 0===s?void 0:s.value;return a!==S||m!==b||g!==C}get editorSettings(){return{themes:Object.values(y.k),fontFamilies:Object.values(f)}}_initForm(){this.formGroup=this._fb.group({editor:this._fb.group({theme:[null,c.kI.required],fontSize:[null,[c.kI.required,c.kI.min(this.minFontSize),c.kI.max(this.maxFontSize)]],fontFamily:[null,[c.kI.required]]})})}_setFormValues(){var e;const{theme:o=y.k.Dark,fontSize:r=14,fontFamily:s="Roboto Mono"}=null===(e=this._userSettings)||void 0===e?void 0:e.aceEditor;this.formGroup.setValue({editor:{theme:o,fontSize:r,fontFamily:s}})}_getEditorUpdates(){var e,o,r,s;const a=null===(e=this.formGroup.get(["editor","theme"]))||void 0===e?void 0:e.value,m=null===(o=this.formGroup.get(["editor","fontSize"]))||void 0===o?void 0:o.value,g=null===(r=this.formGroup.get(["editor","fontFamily"]))||void 0===r?void 0:r.value,{theme:S,fontSize:b,fontFamily:C}=null===(s=this._userSettings)||void 0===s?void 0:s.aceEditor,_={};return a!==S&&(_.theme=a),m!==b&&(_.fontSize=m),g!==C&&(_.fontFamily=g),_}ngOnInit(){this._initForm(),this._subscriptions.add(this._userSettingsService.settings$.subscribe({next:e=>{this._userSettings=e,this._setFormValues(),this._cdr.detectChanges()}})),this._subscriptions.add(this._userService.user$.pipe((0,G.h)(Boolean),(0,N.q)(1)).subscribe({next:e=>{this._user=e,this._cdr.markForCheck()}}))}onSubmit(){const e=this._getEditorUpdates();Object.keys(e).length&&this._subscriptions.add(this._editorSettingsService.update(e,this._user.id).subscribe({next:()=>{this._toastService.showSuccess({textOrTemplate:"Your profile settings successfully saved"})},error:o=>{console.error(o),this._toastService.showDanger({textOrTemplate:"Oops. Error during saving profile settings. Try again later"})}}))}ngOnDestroy(){this._subscriptions.unsubscribe()}onThemeSelect(e){var o;null===(o=this.formGroup.get(["editor","theme"]))||void 0===o||o.setValue(e)}onFontFamilySelect(e){var o;null===(o=this.formGroup.get(["editor","fontFamily"]))||void 0===o||o.setValue(e)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(v.sF),t.Y36(v.KD),t.Y36(c.qu),t.Y36(t.sBO),t.Y36(Q.n),t.Y36(j.k))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-profile-settings"]],decls:27,vars:12,consts:[[1,"container","settings"],[1,"settings__form",3,"formGroup","ngSubmit"],["formGroupName","editor"],[1,"settings__row","d-flex","align-items-center"],[1,"col-6","settings__key"],["ngbDropdown","",1,"my-2"],["type","button","id","theme-dropdown","ngbDropdownToggle","",1,"btn","btn-outline-dark"],["ngbDropdownMenu","","aria-labelledby","theme-dropdown"],["ngbDropdownItem","","type","button",3,"click",4,"ngFor","ngForOf"],["type","number","placeholder","Font size","aria-label","fontsize","aria-describedby","fontsize","formControlName","fontSize",1,"form-control",3,"min","max"],["type","button","id","fontFamily-dropdown","ngbDropdownToggle","",1,"btn","btn-outline-dark"],["class","text-center my-2",4,"ngIf"],["type","submit",1,"btn","btn-light","mt-3","settings__save-btn",3,"disabled","hover-classes"],["ngbDropdownItem","","type","button",3,"click"],[1,"text-center","my-2"],[1,"settings__warning-icon","fas","fa-lg","fa-exclamation-triangle","mx-1"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0)(1,"form",1),t.NdJ("ngSubmit",function(){return o.onSubmit()}),t.TgZ(2,"div",2)(3,"div",3)(4,"div",4),t._uU(5,"Theme"),t.qZA(),t.TgZ(6,"div",5)(7,"button",6),t._uU(8),t.qZA(),t.TgZ(9,"div",7),t.YNc(10,$,2,1,"button",8),t.qZA()()(),t.TgZ(11,"div",3)(12,"div",4),t._uU(13,"Font size"),t.qZA(),t.TgZ(14,"div",5),t._UZ(15,"input",9),t.qZA()(),t.TgZ(16,"div",3)(17,"div",4),t._uU(18,"Font family"),t.qZA(),t.TgZ(19,"div",5)(20,"button",10),t._uU(21),t.qZA(),t.TgZ(22,"div",7),t.YNc(23,E,2,1,"button",8),t.qZA()()()(),t.YNc(24,q,3,0,"h5",11),t.TgZ(25,"button",12),t._uU(26," Save "),t.qZA()()()),2&e){let r,s;t.xp6(1),t.Q6J("formGroup",o.formGroup),t.xp6(7),t.hij(" ",null!==(r=null==(r=o.formGroup.get(t.DdM(10,B)))?null:r.value)&&void 0!==r?r:"Select editor theme"," "),t.xp6(2),t.Q6J("ngForOf",o.editorSettings.themes),t.xp6(5),t.Q6J("min",o.minFontSize)("max",o.maxFontSize),t.xp6(6),t.hij(" ",null!==(s=null==(s=o.formGroup.get(t.DdM(11,R)))?null:s.value)&&void 0!==s?s:"Select editor font family"," "),t.xp6(2),t.Q6J("ngForOf",o.editorSettings.fontFamilies),t.xp6(1),t.Q6J("ngIf",o.hasDiff),t.xp6(1),t.Q6J("disabled",o.isDisabled)("hover-classes","hover-btn-styles")}},directives:[c._Y,c.JL,c.sg,c.x0,p.jt,p.iD,p.Vi,u.sg,p.TH,c.wV,c.qQ,c.Fd,c.Fj,c.JJ,c.u,u.O5,T.B],styles:[".settings__form[_ngcontent-%COMP%]{display:flex;flex-direction:column}.settings__key[_ngcontent-%COMP%]{font-weight:700}.settings__row[_ngcontent-%COMP%]{padding:0 10px}.settings__row[_ngcontent-%COMP%]:nth-child(odd){background-color:#f8f9fa}.settings__warning-icon[_ngcontent-%COMP%]{color:#ffc14f}.settings__save-btn[_ngcontent-%COMP%]{width:20%;margin:0 auto}"],changeDetection:0}),n})()},{path:"",redirectTo:"profile-card",pathMatch:"full"}]}];let H=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[d.Bz.forChild(L)],d.Bz]}),n})();var X=l(4466),K=l(1137);let W=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[u.ez,H,p.IJ,X.m,K.M]]}),n})()}}]);